#!/system/bin/sh

mount -o remount,rw system
for x in `ls /modules/`
do
	MD5SUM1=`md5sum /modules/$x | awk {'print $1'}`
	MD5SUM2=`md5sum /system/lib/modules/$x | awk {'print $1'}`
	if [ "$MD5SUM1" != "$MD5SUM2" ] || [ ! -f /system/lib/modules/$x ]
	then
		cp /modules/$x /system/lib/modules/$x
	fi
done
md5sum /modules/bcm4329.ko | awk {'print $1'} > /system/bcm4329.md5
md5sum /system/lib/modules/bcm4329.ko | awk {'print $1'} > /system/bcm4329-system.md5
mount -o remount,ro system

